var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var J=P((Ce,L)=>{L.exports=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(n.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(i){n.bools[i]=!0});var r={};Object.keys(t.alias||{}).forEach(function(i){r[i]=[].concat(t.alias[i]),r[i].forEach(function(d){r[d]=[i].concat(r[i].filter(function(w){return d!==w}))})}),[].concat(t.string).filter(Boolean).forEach(function(i){n.strings[i]=!0,r[i]&&(n.strings[r[i]]=!0)});var s=t.default||{},o={_:[]};Object.keys(n.bools).forEach(function(i){u(i,s[i]===void 0?!1:s[i])});var c=[];e.indexOf("--")!==-1&&(c=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));function f(i,d){return n.allBools&&/^--[^=]+$/.test(d)||n.strings[i]||n.bools[i]||r[i]}function u(i,d,w){if(!(w&&n.unknownFn&&!f(i,w)&&n.unknownFn(w)===!1)){var a=!n.strings[i]&&R(d)?Number(d):d;A(o,i.split("."),a),(r[i]||[]).forEach(function(F){A(o,F.split("."),a)})}}function A(i,d,w){for(var a=i,F=0;F<d.length-1;F++){var h=d[F];if($(a,h))return;a[h]===void 0&&(a[h]={}),(a[h]===Object.prototype||a[h]===Number.prototype||a[h]===String.prototype)&&(a[h]={}),a[h]===Array.prototype&&(a[h]=[]),a=a[h]}var h=d[d.length-1];$(a,h)||((a===Object.prototype||a===Number.prototype||a===String.prototype)&&(a={}),a===Array.prototype&&(a=[]),a[h]===void 0||n.bools[h]||typeof a[h]=="boolean"?a[h]=w:Array.isArray(a[h])?a[h].push(w):a[h]=[a[h],w])}function T(i){return r[i].some(function(d){return n.bools[d]})}for(var y=0;y<e.length;y++){var l=e[y];if(/^--.+=/.test(l)){var I=l.match(/^--([^=]+)=([\s\S]*)$/),p=I[1],N=I[2];n.bools[p]&&(N=N!=="false"),u(p,N,l)}else if(/^--no-.+/.test(l)){var p=l.match(/^--no-(.+)/)[1];u(p,!1,l)}else if(/^--.+/.test(l)){var p=l.match(/^--(.+)/)[1],v=e[y+1];v!==void 0&&!/^-/.test(v)&&!n.bools[p]&&!n.allBools&&(r[p]?!T(p):!0)?(u(p,v,l),y++):/^(true|false)$/.test(v)?(u(p,v==="true",l),y++):u(p,n.strings[p]?"":!0,l)}else if(/^-[^-]+/.test(l)){for(var g=l.slice(1,-1).split(""),E=!1,b=0;b<g.length;b++){var v=l.slice(b+2);if(v==="-"){u(g[b],v,l);continue}if(/[A-Za-z]/.test(g[b])&&/=/.test(v)){u(g[b],v.split("=")[1],l),E=!0;break}if(/[A-Za-z]/.test(g[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(v)){u(g[b],v,l),E=!0;break}if(g[b+1]&&g[b+1].match(/\W/)){u(g[b],l.slice(b+2),l),E=!0;break}else u(g[b],n.strings[g[b]]?"":!0,l)}var p=l.slice(-1)[0];!E&&p!=="-"&&(e[y+1]&&!/^(-|--)[^-]/.test(e[y+1])&&!n.bools[p]&&(r[p]?!T(p):!0)?(u(p,e[y+1],l),y++):e[y+1]&&/^(true|false)$/.test(e[y+1])?(u(p,e[y+1]==="true",l),y++):u(p,n.strings[p]?"":!0,l))}else if((!n.unknownFn||n.unknownFn(l)!==!1)&&o._.push(n.strings._||!R(l)?l:Number(l)),t.stopEarly){o._.push.apply(o._,e.slice(y+1));break}}return Object.keys(s).forEach(function(i){k(o,i.split("."))||(A(o,i.split("."),s[i]),(r[i]||[]).forEach(function(d){A(o,d.split("."),s[i])}))}),t["--"]?(o["--"]=new Array,c.forEach(function(i){o["--"].push(i)})):c.forEach(function(i){o._.push(i)}),o};function k(e,t){var n=e;t.slice(0,-1).forEach(function(s){n=n[s]||{}});var r=t[t.length-1];return r in n}function R(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function $(e,t){return t==="constructor"&&typeof e[t]=="function"||t==="__proto__"}});var B=P((De,j)=>{var Q={DATA_DIR_FAILED:"Failed to access application data directory"};j.exports.PATH_ERRORS=Q});var S=require("path"),m=require("fs"),X=require("https"),Y=require("crypto"),V=J(),ee=function(){let e=V(process.argv.slice(2)),t,n=[];return e._.length&&(t=e._[0],n=e._),function(){try{return{filepath:t,filepaths:n,_:e._,args:e._,...e}}catch(r){console.error({lid:1e3},r.message)}return null}}();module.exports.getGlobalArguments=ee;var{PATH_ERRORS:te}=B();function ne(e){return new Promise(t=>{setTimeout(t,e)})}function re(e,t=void 0){let n={},r=e.length;for(let s=0;s<r;++s){let o=e[s];n[o]=t===void 0?s:t}return n}function O(e){if(e){if(Array.isArray(e))return!1}else return!1;return typeof e=="object"}function _(e,...t){if(!t.length)return e;let n=t.shift();if(O(e)&&O(n))for(let r in n)O(n[r])?(e[r]||Object.assign(e,{[r]:{}}),_(e[r],n[r])):Object.assign(e,{[r]:n[r]});return _(e,...t)}function oe({prefix:e="",suffix:t="",size:n=16,replacementChar:r="_"}={}){return n=n-e.length,n<0?e:e+Y.randomBytes(n).toString("base64").replace(/[^\w\d]/g,r)+t}var q=(e,t=void 0)=>{let r={port:"port",protocol:"protocol",timeout:"timeout",host:"host",defaultPage:"defaultpage",silent:()=>["--silent"],staticDirs:o=>{let c=[];return o.forEach(f=>{c.push("--dir"),c.push(f)}),c},enableapi:o=>o?[]:["--disableapi"]}[e];return r?typeof r=="function"?r(t):[`--${r}`,t]:[]},se=(e,t,{scriptPath:n="",command:r="",target:s=""}={})=>{let o=t.slice(0,1);if(n){if(!m.existsSync(n))throw new Error(`[${n}] could not be found`);o.push(n)}r&&(o.push(r),s&&o.push(s));for(let[c,f]of Object.entries(e)){let u=q(c,f);!u||!u.length||o.push(...u)}return o},x=(e,{isFolder:t=!1,isForceLinuxFormat:n=!1,isForceRelative:r=!0,uncRoot:s=""}={})=>{let o=e;try{if(o==null)return o;if(!o.trim())return"./";if(t===void 0&&(t=C(e)),o=S.normalize(o),o=o.replace(/\\/gm,"/"),t&&(D(o)||(o=o+"/")),S.isAbsolute(o)){if(n){let f=o.split(":/");f.length>1&&(f[0]=s||f[0],o=f.join("/"))}return o}let c=o.charAt(0);r&&(c==="."||c==="/"||(o="./"+o))}catch(c){console.error(`Could not normalize path [${e}]: ${c.message}`)}return o},ie=(e,{isForceLinuxFormat:t=!1,isForceRelative:n=!0,uncRoot:r=""}={})=>x(e,{isFolder:!0,isForceLinuxFormat:t,isForceRelative:n,uncRoot:r}),ce=e=>{try{return e?(e=e.trim().toLowerCase(),e):""}catch(t){console.error(t)}},le=e=>{try{if(!m.existsSync(e))return{success:!1,error:new Error(`The source file "${e}" does not exist`)};let t=m.lstatSync(e);return t.isFile()?{success:!0,filepath:x(e,{isFolder:!1})}:t.isDirectory()?{success:!0,filepath:x(e,{isFolder:!0})}:{success:!1,error:new Error(`This method only handles files and folders ${e}`)}}catch(t){return{success:!1,error:t}}},C=(...e)=>{try{if(e===void 0)return!1;let t=e[e.length-1];return t?(t=t.trim(),t.slice(-1)==="/"):!1}catch(t){console.error({lid:1151},"Missed case The developer has omitted a use case. Please, send us an email containing this error if possible => "+t.message)}return!1},M=(...e)=>{let t=C(...e),n=S.join(...e);return n=x(n,{isFolder:t}),n},ae=e=>{let t=C(e);return e=S.resolve(e),e=x(e,{isFolder:t}),e},fe=(e,t=[])=>{if(!e)return!1;if(!Array.isArray(t))throw new Error("list should be an array");return!t||!t.length?!1:t.includes(e)},ue=e=>m.statSync(e).size,H=function(e,t={encoding:"utf-8"}){return m.readFileSync(e,t)},U=function(e,t,n={encoding:"utf-8"}){return m.writeFileSync(e,t,n)},pe=function(e){let t=H(e),n;try{n=JSON.parse(t)}catch(r){console.error(r)}return n},he=function(e,t,{indent:n=null,encoding:r="utf-8"}={}){let s;s=JSON.stringify(t,null,n),U(e,s,{encoding:r})},de=({protocol:e,host:t,port:n,pathname:r})=>{let s=new URL("http://localhost");return s.protocol=e,s.host=t,s.port=n,r&&(s.pathname=r),s.toString()},me=function(e){e||console.log({lid:2e3,target:"void"},e)},D=e=>e?e.charAt(e.length-1)==="/":!1,ye=(e,t)=>{e=x(e),t=x(t),D(e)||(e=S.parse(e).dir+"/");let n=S.relative(e,t);return x(n)},be=async function(e,t=!1){return new Promise(async function(n,r){try{X.get(e,s=>{let o="";s.on("data",c=>{o+=c}),s.on("end",()=>{o=t?JSON.parse(o):o,n(o)})}).on("error",s=>{console.log(s.message)})}catch(s){r(s)}})};function ve(e,t="word"){if(t==="verb")return e===1?"s":"";if(t==="word")return e===1?"":"s"}var ge=(e,t="",{replaceDash:n=!1,uselowercase:r=!0}={})=>{let s={},o={};return(Array.isArray(t)?t:t.split(",")).forEach(f=>{f=f.trim(),o[f.toLowerCase()]=f}),Object.keys(e).forEach(f=>{let u=f.toLowerCase();if(n){let A=u.replaceAll("-","");A&&(u=A)}if(o.hasOwnProperty(u)){let A=o[u];s[A]=e[f];return}if(r){s[u]=e[f];return}s[f]=e[f]}),s},xe=(e,t={})=>(Object.keys(e).forEach(n=>{t[n]=e[n],t[n.toLowerCase()]=e[n]}),t),z=function(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;++r){let s=e[r],o=t[r];if(s!==o)return e.substring(r)}return e},Ae=e=>{let t=e.length,n=e[0];for(let s=0;s<t;++s){let o=x(e[s]);if(t<=1)break;n=z(o,n)}if(n=x(n),D(n))return n;let r=n.lastIndexOf("/");return r<0?"/":n.substring(0,r+1)},K=e=>{try{let t=process.env.APPDATA||(process.platform==="darwin"?process.env.HOME+"/Library/Preferences":process.env.HOME+"/.local/share");return M(t,e)}catch{}return null},we=e=>{try{let t=K(e);return t?(m.existsSync(t)||m.mkdirSync(t,{recursive:!0}),m.lstatSync(t).isDirectory()):(console.error(te.DATA_DIR_FAILED),!1)}catch(t){console.error(t.message)}return!1},G=function(e){try{let t,n,r,s,o=e.split(":");r=parseInt(o.pop()),n=parseInt(o.pop()),o=o.join(":").split(/\s*\(/),s=o.pop();let f=o.pop().match(/\bat\s+(\w+)/);return t=f.length===2?f[1]:"",{funcName:t,lineNumber:n,colNumber:r,source:s,filesource:s}}catch(t){console.error({lid:1e3},t.message)}return null},Se=({stackStart:e=4,stackPhrase:t=""}={})=>{let n,r;try{n=new Error("MyError").stack.split(`
`);let o;if(t&&(o=new RegExp(t,"gm"),e=0),!e){for(let c=0;c<n.length;++c)if(o.test(n[c])){e=c+1;break}}if(r=G(n[e]),!r)return{}}catch(s){console.error({lid:2239},s.message)}return{lines:n,...r,fileSource:r.source}},Fe=()=>{let e,t,n=[];try{e=new Error("MyError").stack.split(`
`);let s=-1;for(let o=0;o<e.length;++o){let c=e[o];/\btestgen\.cjs\b/.test(c)&&(s=o),t=G(c),t&&n.push(t)}s>-1&&(n=n.slice(s))}catch(r){console.error({lid:2239},r.message)}return n},Z=(e,t)=>{let n=r=>Object.entries(r).sort().map(s=>(s[1]instanceof Object&&(s[1]=n(s[1])),s));return JSON.stringify(n(e))===JSON.stringify(n(t))},W=(e,{extension:t="bak"}={})=>{let n=S.parse(e),r=n.dir,s=n.name,o=S.join(r,s+`.${t}`);if(!m.existsSync(o))return o;for(let c=0;;++c){let f=S.join(r,s+`.${t}.${c}`);if(!m.existsSync(f))return f}throw Error("Could not determine file temp name")},Ee=(e,t)=>{try{if(!e)return!1;if(m.existsSync(t)){let s=m.readFileSync(t,"utf-8"),o=JSON.parse(s);if(Z(o,s))return!0}let n=JSON.stringify(e,null,4),r=W(t);return m.copyFileSync(t,r),m.writeFileSync(t,n,"utf-8"),m.unlinkSync(r),!0}catch(n){console.error(n.message)}return!1};module.exports.convertArrayToObject=re;module.exports.mergeDeep=_;module.exports.sleep=ne;module.exports.convertSessionKeyNameToArg=q;module.exports.convertSessionToArg=se;module.exports.isItemInList=fe;module.exports.doNothing=me;module.exports.isObject=O;module.exports.areEquals=Z;module.exports.replaceJsonContent=Ee;module.exports.generateTempName=oe;module.exports.getCommon=z;module.exports.addPlural=ve;module.exports.convertToUrl=de;module.exports.fetchSync=be;module.exports.getFilesizeInBytes=ue;module.exports.getFileContent=H;module.exports.writeFileContent=U;module.exports.loadJsonFile=pe;module.exports.saveJsonFile=he;module.exports.normaliseFileName=ce;module.exports.getFilepathCopyName=W;module.exports.getCallInfo=Se;module.exports.getStackInfo=Fe;module.exports.importLowerCaseOptions=ge;module.exports.changeOptionsToLowerCase=xe;module.exports.isArgsDir=C;module.exports.getAppDataDir=K;module.exports.createAppDataDir=we;module.exports.isConventionalFolder=D;module.exports.resolvePath=ae;module.exports.joinPath=M;module.exports.normalisePath=x;module.exports.normaliseDirPath=ie;module.exports.calculateRelativePath=ye;module.exports.calculateCommon=Ae;module.exports.normaliseRealPath=le;
