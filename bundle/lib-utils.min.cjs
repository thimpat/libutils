var v=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var g=v((z,m)=>{var b={DATA_DIR_FAILED:"Failed to access application data directory"};m.exports.PATH_ERRORS=b});var l=require("path"),u=require("fs"),P=require("https"),S=require("crypto"),{PATH_ERRORS:T}=g();function w(e){return new Promise(r=>{setTimeout(r,e)})}function f(e){if(e){if(Array.isArray(e))return!1}else return!1;return typeof e=="object"}function d(e,...r){if(!r.length)return e;let o=r.shift();if(f(e)&&f(o))for(let n in o)f(o[n])?(e[n]||Object.assign(e,{[n]:{}}),d(e[n],o[n])):Object.assign(e,{[n]:o[n]});return d(e,...r)}function L({prefix:e="",suffix:r="",size:o=16,replacementChar:n="_"}={}){return o=o-e.length,o<0?e:e+S.randomBytes(o).toString("base64").replace(/[^\w\d]/g,n)+r}var A=(e,r=void 0)=>{let n={port:"port",protocol:"protocol",timeout:"timeout",host:"host",defaultPage:"defaultpage",silent:()=>["--silent"],staticDirs:t=>{let i=[];return t.forEach(a=>{i.push("--dir"),i.push(a)}),i},enableapi:t=>t?[]:["--disableapi"]}[e];return n?typeof n=="function"?n(r):[`--${n}`,r]:[]},R=(e,r,{scriptPath:o="",command:n="",target:s=""}={})=>{let t=r.slice(0,1);if(o){if(!u.existsSync(o))throw new Error(`[${o}] could not be found`);t.push(o)}n&&(t.push(n),s&&t.push(s));for(let[i,a]of Object.entries(e)){let h=A(i,a);!h||!h.length||t.push(...h)}return t},c=(e,{isFolder:r=!1,isForceLinuxFormat:o=!1,isForceRelative:n=!0,uncRoot:s=""}={})=>{let t=e;try{if(t==null)return t;if(!t.trim())return"./";if(r===void 0&&(r=p(e)),t=l.normalize(t),t=t.replace(/\\/gm,"/"),r&&(y(t)||(t=t+"/")),l.isAbsolute(t)){if(o){let a=t.split(":/");a.length>1&&(a[0]=s||a[0],t=a.join("/"))}return t}let i=t.charAt(0);n&&(i==="."||i==="/"||(t="./"+t))}catch(i){console.error(`Could not normalize path [${e}]: ${i.message}`)}return t},E=(e,{isForceLinuxFormat:r=!1,isForceRelative:o=!0,uncRoot:n=""}={})=>c(e,{isFolder:!0,isForceLinuxFormat:r,isForceRelative:o,uncRoot:n}),j=e=>{try{return e?(e=e.trim().toLowerCase(),e):""}catch(r){console.error(r)}},p=(...e)=>{try{if(e===void 0)return!1;let r=e[e.length-1];return r?(r=r.trim(),r.slice(1)==="/"):!1}catch(r){console.error({lid:1151},"Missed case The developer has omitted a use case. Please, send us an email containing this error if possible => "+r.message)}return!1},D=(...e)=>{let r=p(...e),o=l.join(...e);return o=c(o,{isFolder:r}),o},F=e=>{let r=p(e);return e=l.resolve(e),e=c(e,{isFolder:r}),e},I=(e,r=[])=>{if(!e)return!1;if(!Array.isArray(r))throw new Error("list should be an array");return!r||!r.length?!1:r.includes(e)},O=e=>u.statSync(e).size,C=({protocol:e,host:r,port:o,pathname:n})=>{let s=new URL("http://localhost");return s.protocol=e,s.host=r,s.port=o,n&&(s.pathname=n),s.toString()},_=function(e){e||console.log({lid:2e3,target:"void"},e)},y=e=>e?e.charAt(e.length-1)==="/":!1,N=(e,r)=>{e=c(e),r=c(r),y(e)||(e=l.parse(e).dir+"/");let o=l.relative(e,r);return c(o)},H=async function(e,r=!1){return new Promise(async function(o,n){try{P.get(e,s=>{let t="";s.on("data",i=>{t+=i}),s.on("end",()=>{t=r?JSON.parse(t):t,o(t)})}).on("error",s=>{console.log(s.message)})}catch(s){n(s)}})};function $(e,r="word"){if(r==="verb")return e===1?"s":"";if(r==="word")return e===1?"":"s"}var q=(e,r="",o={})=>{let n={};return r.split(",").forEach(t=>{t=t.trim(),n[t.toLowerCase()]=t}),Object.keys(e).forEach(t=>{let i=t.toLowerCase();if(i!==t){let a=n[i];if(a){o[a]=e[t];return}}o[t]=e[t]}),o},B=(e,r={})=>(Object.keys(e).forEach(o=>{r[o]=e[o],r[o.toLowerCase()]=e[o]}),r),x=e=>{try{let r=process.env.APPDATA||(process.platform==="darwin"?process.env.HOME+"/Library/Preferences":process.env.HOME+"/.local/share");return D(r,e)}catch{}return null},M=e=>{try{let r=x(e);return r?(u.existsSync(r)||u.mkdirSync(r,{recursive:!0}),u.lstatSync(r).isDirectory()):(console.error(T.DATA_DIR_FAILED),!1)}catch(r){console.error(r.message)}return!1};module.exports.normalisePath=c;module.exports.normaliseDirPath=E;module.exports.joinPath=D;module.exports.mergeDeep=d;module.exports.sleep=w;module.exports.generateTempName=L;module.exports.convertSessionKeyNameToArg=A;module.exports.convertSessionToArg=R;module.exports.resolvePath=F;module.exports.isItemInList=I;module.exports.getFilesizeInBytes=O;module.exports.convertToUrl=C;module.exports.doNothing=_;module.exports.fetchSync=H;module.exports.calculateRelativePath=N;module.exports.normaliseFileName=j;module.exports.isObject=f;module.exports.addPlural=$;module.exports.importLowerCaseOptions=q;module.exports.changeOptionsToLowerCase=B;module.exports.isArgsDir=p;module.exports.getAppDataDir=x;module.exports.createAppDataDir=M;
