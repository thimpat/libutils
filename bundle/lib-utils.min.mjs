import l from"path";import f from"fs";import x from"https";import A from"crypto";var d={DATA_DIR_FAILED:"Failed to access application data directory"};function L(e){return new Promise(r=>{setTimeout(r,e)})}function p(e){if(e){if(Array.isArray(e))return!1}else return!1;return typeof e=="object"}function m(e,...r){if(!r.length)return e;let o=r.shift();if(p(e)&&p(o))for(let n in o)p(o[n])?(e[n]||Object.assign(e,{[n]:{}}),m(e[n],o[n])):Object.assign(e,{[n]:o[n]});return m(e,...r)}function j({prefix:e="",suffix:r="",size:o=16,replacementChar:n="_"}={}){return o=o-e.length,o<0?e:e+A.randomBytes(o).toString("base64").replace(/[^\w\d]/g,n)+r}var y=(e,r=void 0)=>{let n={port:"port",protocol:"protocol",timeout:"timeout",host:"host",defaultPage:"defaultpage",silent:()=>["--silent"],staticDirs:t=>{let i=[];return t.forEach(c=>{i.push("--dir"),i.push(c)}),i},enableapi:t=>t?[]:["--disableapi"]}[e];return n?typeof n=="function"?n(r):[`--${n}`,r]:[]},R=(e,r,{scriptPath:o="",command:n="",target:s=""}={})=>{let t=r.slice(0,1);if(o){if(!f.existsSync(o))throw new Error(`[${o}] could not be found`);t.push(o)}n&&(t.push(n),s&&t.push(s));for(let[i,c]of Object.entries(e)){let u=y(i,c);!u||!u.length||t.push(...u)}return t},a=(e,{isFolder:r=!1,isForceLinuxFormat:o=!1,isForceRelative:n=!0,uncRoot:s=""}={})=>{let t=e;try{if(t==null)return t;if(!t.trim())return"./";if(r===void 0&&(r=h(e)),t=l.normalize(t),t=t.replace(/\\/gm,"/"),r&&(g(t)||(t=t+"/")),l.isAbsolute(t)){if(o){let c=t.split(":/");c.length>1&&(c[0]=s||c[0],t=c.join("/"))}return t}let i=t.charAt(0);n&&(i==="."||i==="/"||(t="./"+t))}catch(i){console.error(`Could not normalize path [${e}]: ${i.message}`)}return t},F=(e,{isForceLinuxFormat:r=!1,isForceRelative:o=!0,uncRoot:n=""}={})=>a(e,{isFolder:!0,isForceLinuxFormat:r,isForceRelative:o,uncRoot:n}),I=e=>{try{return e?(e=e.trim().toLowerCase(),e):""}catch(r){console.error(r)}},h=(...e)=>{try{if(e===void 0)return!1;let r=e[e.length-1];return r?(r=r.trim(),r.slice(1)==="/"):!1}catch(r){console.error({lid:1151},"Missed case The developer has omitted a use case. Please, send us an email containing this error if possible => "+r.message)}return!1},D=(...e)=>{let r=h(...e),o=l.join(...e);return o=a(o,{isFolder:r}),o},_=e=>{let r=h(e);return e=l.resolve(e),e=a(e,{isFolder:r}),e},C=(e,r=[])=>{if(!e)return!1;if(!Array.isArray(r))throw new Error("list should be an array");return!r||!r.length?!1:r.includes(e)},O=e=>f.statSync(e).size,H=({protocol:e,host:r,port:o,pathname:n})=>{let s=new URL("http://localhost");return s.protocol=e,s.host=r,s.port=o,n&&(s.pathname=n),s.toString()},$=function(e){e||console.log({lid:2e3,target:"void"},e)},g=e=>e?e.charAt(e.length-1)==="/":!1,M=(e,r)=>{e=a(e),r=a(r),g(e)||(e=l.parse(e).dir+"/");let o=l.relative(e,r);return a(o)},B=async function(e,r=!1){return new Promise(async function(o,n){try{x.get(e,s=>{let t="";s.on("data",i=>{t+=i}),s.on("end",()=>{t=r?JSON.parse(t):t,o(t)})}).on("error",s=>{console.log(s.message)})}catch(s){n(s)}})};function N(e,r="word"){if(r==="verb")return e===1?"s":"";if(r==="word")return e===1?"":"s"}var U=(e,r="",o={})=>{let n={};return r.split(",").forEach(t=>{t=t.trim(),n[t.toLowerCase()]=t}),Object.keys(e).forEach(t=>{let i=t.toLowerCase();if(i!==t){let c=n[i];if(c){o[c]=e[t];return}}o[t]=e[t]}),o},z=(e,r={})=>(Object.keys(e).forEach(o=>{r[o]=e[o],r[o.toLowerCase()]=e[o]}),r),b=e=>{try{let r=process.env.APPDATA||(process.platform==="darwin"?process.env.HOME+"/Library/Preferences":process.env.HOME+"/.local/share");return D(r,e)}catch{}return null},J=e=>{try{let r=b(e);return r?(f.existsSync(r)||f.mkdirSync(r,{recursive:!0}),f.lstatSync(r).isDirectory()):(console.error(d.DATA_DIR_FAILED),!1)}catch(r){console.error(r.message)}return!1};export{N as addPlural,M as calculateRelativePath,z as changeOptionsToLowerCase,y as convertSessionKeyNameToArg,R as convertSessionToArg,H as convertToUrl,J as createAppDataDir,$ as doNothing,B as fetchSync,j as generateTempName,b as getAppDataDir,O as getFilesizeInBytes,U as importLowerCaseOptions,h as isArgsDir,C as isItemInList,p as isObject,D as joinPath,m as mergeDeep,F as normaliseDirPath,I as normaliseFileName,a as normalisePath,_ as resolvePath,L as sleep};
